<style>
  body {
    width: 80%;
    font-family: sans-serif;
    line-height: 1.4;
    margin: auto;
  }
</style>
<!-- === begin markdown block ===

      generated by markdown 1.1.1 on Ruby 2.0.0 (2013-06-27) [x86_64-darwin13.0.0]
                on 2014-02-27 13:56:50 +0000 with Markdown engine kramdown (1.3.2)
                  using options {}
  -->
<h1 id="atwd-rest-service">ATWD REST Service</h1>

<h2 id="accessing-the-application">Accessing the application</h2>
<ul>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/client</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/crimes/6-2013/xml</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/crimes/6-2013/json</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/crimes/6-2013/south_west/xml</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/crimes/6-2013/south_west/json</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/crimes/6-2013/put/south_west:12345/xml</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/crimes/6-2013/put/south_west:12345/json</li>
</ul>

<h2 id="viewing-source-code">Viewing source code</h2>

<p>Source code is best viewed on GitHub at http://github.com/markjs/atwd-rest_service but can also be viewed through <code>.phps</code> files on CEMS.</p>

<ul>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/index.phps</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/app/get/all_crimes.phps</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/app/get/region_crimes.phps</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/app/put/region_total.phps</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/app/views/all_crimes.json.phps</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/app/views/all_crimes.xml.phps</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/app/views/region_crimes.json.phps</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/app/views/region_crimes.xml.phps</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/app/views/region_total.json.phps</li>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/app/views/region_total.xml.phps</li>
</ul>

<p>The <code>.htaccess</code> file can be viewed here</p>

<ul>
  <li>http://www.cems.uwe.ac.uk/~mj7-smith/atwd/htaccess</li>
</ul>

<h2 id="application-decisions">Application decisions</h2>

<p>In building the application, it was decided that routing would be done within PHP itself, rather than the alternative - configuring all routes within a number of <code>.htaccess</code> rewrite rules. This decision was made to improve agility in configuring and developing routes. The <code>.htaccess</code> file redirects all routes to <code>index.php</code> excluding those where a file directly exists at the requested address. Within <code>index.php</code>, the URLs are processed and matched against regular expressions and the appropriate PHP script included. Once the processing is completed within this script, a view file is included based on the requested format (XML or JSON). This is configured in such a way that extra formats could easily be added with separate view files and a slight change to the regular expressions in <code>index.php</code>.</p>

<h2 id="xml-crime-data">XML crime data</h2>

<p>The XML crime data was not created by a processing script. This was taken from a provided XML file and manipulated slightly. No Schema is provided.</p>

<p>The XML file can be viewed here, but no creation details or scripts are available as none were used.</p>

<ul>
  <li>http://cems.uwe.ac.uk/~mj7-smith/atwd/data/recorded_crime.xml</li>
</ul>

<h2 id="learning-outcomes">Learning outcomes</h2>

<p>In building this application I tried to focus on minimalism, trying to solve problems in as little code as is reasonable, without sacrificing simplicity and readability of code.</p>

<p>Through using PHP includes I learnt that include paths work relative to the parent file that is including the file youâ€™re in. To stop this from creating any issues, I made sure that all included files are ultimately included within <code>index.php</code> so all file paths are relative to the root directory of the application.</p>

<p>In deploying the application to the CEMS servers there was an issue with URL encoding that differed between <code>www.cems</code> and <code>isa.cems</code>. This was solved by substituting the <code>~</code> in the <code>.htaccess</code> file with an encoded <code>%7E</code>.</p>

<h2 id="struggles">Struggles</h2>

<p>I struggled greatly with the vaugeness and inconsistencies of the provided specification. The spec missed out key details on the functionality of the application with left me a little lost when implementing certain features.</p>
<!-- === end markdown block === -->
